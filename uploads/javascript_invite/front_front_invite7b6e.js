; (function ($, _, undefined) { "use strict"; ips.controller.register('invite.front.invite.globallink', { loaded: {}, initialize: function () { this.on(document, 'menuOpened', this.getAccounts); }, getAccounts: function (e, data) { if (!this.loaded['accountsConverted']) { var self = this; var url = ips.getSetting('baseURL') + 'index.php?app=invite&module=invite&controller=invite&do=getConvertedMembers'; $('[data-role="invitationList"]').html('').css({ height: '100px' }).addClass('ipsLoading'); ips.getAjax()(url, { dataType: 'json' }).done(function (returnedData) { $('[data-role="invitationList"]').css({ height: 'auto' }).removeClass('ipsLoading').html(returnedData.html); self.loaded['accountsConverted'] = true; $(document).trigger('contentChange', [$('[data-role="invitationList"]')]); }).fail(function () { Debug.log('Error fetching accounts converted'); }); } } }); }(jQuery, _));;